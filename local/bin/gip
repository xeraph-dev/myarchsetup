#!/bin/bash

ip=$(curl --silent api.ipify.org)

if [[ $ip =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ ]]; then
    echo $ip
else
    if [ "/usr/bin/hostname" ]; then
        echo $(hostname -i)
    fi
fi
